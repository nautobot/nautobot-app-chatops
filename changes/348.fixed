Resolve the issue of a synchronous function running in the async sockets.
